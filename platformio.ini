; PlatformIO project configuration for the MiniLabBox v2 firmware
[env:nodemcuv2]
platform = espressif8266@4.2.1
board = nodemcuv2
framework = arduino
; Use LittleFS as the filesystem. This must match the FS used in code.
board_build.filesystem = littlefs
monitor_speed = 115200

; Avoid pulling in the wrong AsyncTCP variants
lib_ignore = AsyncTCP, AsyncTCP_RP2040W

; External dependencies.  ESPAsyncWebServer provides the HTTP stack.  
; ESPAsyncTCP is required by the web server.  ArduinoJson handles configuration
; and API responses.  U8g2 is included for potential OLED support.  
; Adafruit ADS1X15 supplies the driver for the optional ADS1115 ADC module.
lib_deps =
  https://github.com/me-no-dev/ESPAsyncWebServer.git
  https://github.com/me-no-dev/ESPAsyncTCP.git
  bblanchon/ArduinoJson@^6.21.5
  olikraus/U8g2@^2.36.12
  adafruit/Adafruit ADS1X15@^1.1.2

lib_ldf_mode = chain+
lib_compat_mode = strict

build_flags =
  -DASYNCWEBSERVER_REGEX
  -DASYNC_TCP_SSL_ENABLED
  -D PIO_FRAMEWORK_ARDUINO_LWIP_HIGHER_BANDWIDTH
  -Isrc
