<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Logs MiniLabBox</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 1em; }
    pre { background: #f0f0f0; padding: 1em; white-space: pre-wrap; }
  </style>
  <script src="auth.js"></script>
</head>
<body>
<h1>Logs du syst√®me</h1>
<pre id="log">Chargement...</pre>
<script>
async function loadLogs() {
  try {
    const resp = await authFetch('/api/logs');
    if (!resp.ok) {
      document.getElementById('log').textContent = 'Impossible de charger les logs';
      return;
    }
    const text = await resp.text();
    document.getElementById('log').textContent = text;
  } catch (err) {
    document.getElementById('log').textContent = 'Erreur de chargement';
  }
}
window.addEventListener('DOMContentLoaded', () => {
  ensureSession()
    .then(loadLogs)
    .catch(err => {
      console.error(err);
      document.getElementById('log').textContent = 'Session requise pour afficher les logs.';
    });
});
</script>
</body>
</html>
